{"version":3,"sources":["components/searchBar/searchBar.js","components/imageGalleryItem/imageGalleryItem.js","components/loader/loader.js","components/button/button.js","components/modal/modal.js","components/imageGallery/ImageGallery.js","components/fetchPictures/fetchPictures.js","App.js","index.js"],"names":["SearchBar","onSubmit","useState","pictureName","setstatePictureName","className","event","preventDefault","trim","alert","type","value","onChange","currentTarget","toLowerCase","placeholder","ImageGalleryItem","pictures","click","map","id","tags","webformatURL","onClick","src","width","height","alt","Loader","color","timeout","Button","modalRoot","document","querySelector","Modal","onCloseModal","useEffect","window","addEventListener","handleKeyDown","removeEventListener","e","code","createPortal","target","this","props","ImageGallery","picturesName","status","setStatus","showModal","setShowModal","setPictures","currentImage","setCurrentImage","totalPages","setTotalPages","currentPage","setCurrentPage","error","setError","handleFetchPictures","page","PER_PAGE","KEYS","fetch","then","response","ok","json","Promise","reject","Error","fetchPictures","totalHits","hits","Math","ceil","catch","scrollTo","top","documentElement","scrollHeight","behavior","message","App","state","handlFormSubmit","setState","React","Component","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.c6a71a6c.chunk.js","sourcesContent":["import React, { useState } from 'react'\r\nimport './searchBar.scss'\r\n\r\nexport default function SearchBar({ onSubmit }) {\r\n  const [pictureName, setstatePictureName] = useState('')\r\n\r\n  const handleNameChange = (event) => {\r\n    setstatePictureName(event.currentTarget.value.toLowerCase())\r\n  }\r\n\r\n  const handelSubmit = (event) => {\r\n    event.preventDefault()\r\n    if (pictureName.trim() === '') {\r\n      alert('введите название изображения')\r\n      return\r\n    }\r\n    onSubmit(pictureName)\r\n    setstatePictureName('')\r\n  }\r\n\r\n  return (\r\n    <header className=\"Searchbar\">\r\n      <form onSubmit={handelSubmit} className=\"SearchForm\">\r\n        <button type=\"submit\" className=\"SearchForm-button\">\r\n          <span className=\"SearchForm-button-label\">Search</span>\r\n        </button>\r\n\r\n        <input\r\n          value={pictureName}\r\n          onChange={handleNameChange}\r\n          className=\"SearchForm-input\"\r\n          type=\"text\"\r\n          placeholder=\"Search images and photos\"\r\n        />\r\n      </form>\r\n    </header>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './imageGalleryItem.scss'\r\n\r\nexport default function ImageGalleryItem({ pictures, click }) {\r\n  return pictures.map(({ id, tags, webformatURL }) => (\r\n    <li key={id} className=\"ImageGalleryItem\">\r\n      <img\r\n        onClick={() => click(webformatURL, tags)}\r\n        src={webformatURL}\r\n        width=\"800\"\r\n        height=\"600\"\r\n        alt={tags}\r\n        className=\"ImageGalleryItem-image\"\r\n      />\r\n    </li>\r\n  ))\r\n}\r\n\r\nImageGalleryItem.propTypes = {\r\n  pictures: PropTypes.arrayOf(PropTypes.object),\r\n  click: PropTypes.func.isRequired,\r\n}\r\n","import React from 'react'\r\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css'\r\nimport Spinner from 'react-loader-spinner'\r\n\r\nexport default function Loader() {\r\n  return (\r\n    <>\r\n      <h1>Загружаем....</h1>\r\n      <Spinner\r\n        type=\"Puff\"\r\n        color=\"#00BFFF\"\r\n        height={50}\r\n        width={50}\r\n        timeout={5000}\r\n      />\r\n    </>\r\n  )\r\n}\r\n","import React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './button.scss'\r\n\r\nexport default function Button({ click }) {\r\n  return (\r\n    <button type=\"button\" onClick={click} className=\"Button\">\r\n      Load more\r\n    </button>\r\n  )\r\n}\r\n\r\nButton.propTypes = {\r\n  click: PropTypes.func.isRequired,\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport './modal.scss'\r\nimport { createPortal } from 'react-dom'\r\n\r\nconst modalRoot = document.querySelector('#modal-root')\r\n\r\nexport default function Modal({ onCloseModal }) {\r\n  useEffect(() => {\r\n    window.addEventListener('keydown', handleKeyDown)\r\n    return () => {\r\n      window.removeEventListener('keydown', handleKeyDown)\r\n    }\r\n  }, [])\r\n\r\n  const handleKeyDown = (e) => {\r\n    if (e.code === 'Escape') {\r\n      onCloseModal()\r\n    }\r\n  }\r\n\r\n  const handleBackdropClick = (e) => {\r\n    if (e.currentTarget === e.target) {\r\n      onCloseModal()\r\n    }\r\n  }\r\n\r\n  return createPortal(\r\n    <div onClick={handleBackdropClick} className=\"Overlay\">\r\n      <div className=\"Modal\">\r\n        <img src={this.props.src} alt={this.props.alt} />\r\n      </div>\r\n    </div>,\r\n    modalRoot\r\n  )\r\n}\r\n\r\nModal.propTypes = {\r\n  onCloseModal: PropTypes.func.isRequired,\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport './imageGallary.scss'\r\nimport ImageGalleryItem from '../imageGalleryItem/imageGalleryItem'\r\nimport Loader from '../loader/loader'\r\nimport Button from '../button/button'\r\nimport Modal from '../modal/modal'\r\nimport fetchPictures from '../fetchPictures/fetchPictures'\r\n\r\nconst PER_PAGE = 12\r\nconst KEYS = '22042879-adb59bab87f7729a85f6313d3'\r\n\r\nexport default function ImageGallery({ picturesName }) {\r\n  const [status, setStatus] = useState('idle')\r\n  const [showModal, setShowModal] = useState(false)\r\n  const [pictures, setPictures] = useState([])\r\n  const [currentImage, setCurrentImage] = useState({})\r\n  const [totalPages, setTotalPages] = useState(1)\r\n  const [currentPage, setCurrentPage] = useState(1)\r\n  const [error, setError] = useState('')\r\n\r\n  useEffect(() => {\r\n    picturesName && handleFetchPictures(1)\r\n  }, [picturesName])\r\n\r\n  const handleFetchPictures = (page) => {\r\n    setStatus('pending')\r\n    fetchPictures({ picturesName: picturesName, KEYS, PER_PAGE, page })\r\n      .then(({ totalHits, hits }) => {\r\n        if (totalHits === 0) {\r\n          return Promise.reject(\r\n            new Error(`нет изображения с именем ${picturesName}`)\r\n          )\r\n        }\r\n\r\n        setPictures(() => (page === 1 ? hits : [...pictures, ...hits]))\r\n        setStatus('resolved')\r\n        setTotalPages(Math.ceil(totalHits / PER_PAGE))\r\n        setCurrentPage(page)\r\n      })\r\n      .catch((error) => {\r\n        setError(error)\r\n        setStatus('rejected')\r\n      })\r\n  }\r\n\r\n  useEffect(() => {\r\n    status === 'resolved' &&\r\n      window.scrollTo({\r\n        top: document.documentElement.scrollHeight,\r\n        behavior: 'smooth',\r\n      })\r\n  }, [status])\r\n\r\n  const handlLoadMore = () => {\r\n    handleFetchPictures(currentPage + 1)\r\n  }\r\n\r\n  const openModal = (src, alt) => {\r\n    setShowModal(true)\r\n    setCurrentImage({ src, alt })\r\n  }\r\n\r\n  const closeModal = () => {\r\n    setShowModal(false)\r\n  }\r\n\r\n  if (status === 'idle') {\r\n    return <div>Введите название изображения</div>\r\n  }\r\n\r\n  if (status === 'rejected') {\r\n    return <h1>{error.message}</h1>\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <ul className=\"ImageGallery\">\r\n        <ImageGalleryItem pictures={pictures} click={openModal} />\r\n      </ul>\r\n      {status === 'pending' ? (\r\n        <Loader />\r\n      ) : (\r\n        currentPage < totalPages && <Button click={handlLoadMore} />\r\n      )}\r\n      {showModal && <Modal onCloseModal={closeModal} {...currentImage} />}\r\n    </div>\r\n  )\r\n}\r\n\r\nImageGallery.propTypes = {\r\n  picturesName: PropTypes.string,\r\n}\r\n","import React from 'react'\r\n\r\nexport default function fetchPictures({\r\n  picturesName = '',\r\n  page = 1,\r\n  PER_PAGE = 12,\r\n  KEYS = '22042879-adb59bab87f7729a85f6313d3',\r\n} = {}) {\r\n  return fetch(\r\n    `https://pixabay.com/api/?image_type=photo&orientation=horizontal&q=${picturesName}&page=${page}&per_page=${PER_PAGE}&key=${KEYS}`\r\n  ).then((response) => {\r\n    if (response.ok) {\r\n      return response.json()\r\n    }\r\n    return Promise.reject(new Error(`произошла ошибка`))\r\n  })\r\n}\r\n","import React from 'react'\nimport './App.scss'\nimport SearchBar from './components/searchBar/searchBar'\nimport ImageGallery from './components/imageGallery/ImageGallery'\n\nimport './App.scss'\n\nclass App extends React.Component {\n  state = {\n    picturesName: '',\n  }\n\n  handlFormSubmit = (picturesName) => {\n    this.setState({ picturesName })\n  }\n\n  render() {\n    return (\n      <div className=\"App\">\n        <SearchBar onSubmit={this.handlFormSubmit} />\n        <ImageGallery picturesName={this.state.picturesName} />\n      </div>\n    )\n  }\n}\n\nexport default App\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\nimport './index.css'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root')\n)\n"],"sourceRoot":""}